# 前端页面规范

## 1. 技术栈基础

### 1.1 核心框架

本规范基于以下技术栈构建，遵循其官方最佳实践：

- **Vue 3**：使用 Composition API 和 `<script setup>` 语法糖
  - Source: [Vue 3 官方文档](https://vuejs.org/guide/introduction.html)
- **Pinia**：官方推荐的状态管理库
  - Source: [Pinia 官方文档](https://pinia.vuejs.org/)
- **Vue Router**：官方路由管理库
  - Source: [Vue Router 官方文档](https://router.vuejs.org/)
- **Axios**：HTTP 请求库（需封装统一拦截器）
- **Tailwind CSS**：原子化 CSS 框架
  - Source: [Tailwind CSS 官方文档](https://tailwindcss.com/docs)

### 1.2 样式方案

- **Tailwind CSS**：原子化 CSS 类，按需定制
  - 使用 `@apply` 提取公共样式（可选）
  - 通过 `tailwind.config.js` 配置主题
- **CSS 变量**：定义主题色、间距等全局常量
- **响应式设计**：基于 Tailwind 的响应式断点

### 1.3 组件库规范

**Element Plus 禁用规定**：

项目已从 Element Plus 迁移到自定义组件，**全面禁止使用 Element Plus 组件**。

- **图标**：统一使用 **Font Awesome**（见第 11 章图标使用规范）
- **UI 组件**：使用自定义 Vue 组件 + Tailwind CSS 实现
- **过渡动画**：使用 Vue 内置 `<Transition>` 组件 + Tailwind 类
- **表单验证**：使用自定义校验逻辑或 VeeValidate

**需要先获取当前项目所实现的自定义组件评估是否存在未被利用的组件**

## 2. 模板结构规范

### 2.1 语义化标签

页面模板应使用语义化 HTML 标签，增强可读性和可访问性：

```vue
<template>
  <div class="min-h-screen bg-gray-50">
    <!-- 页面标题 -->
    <header class="bg-white shadow-sm">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-xl font-semibold text-gray-900">{{ pageTitle }}</h1>
      </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <section class="bg-white rounded-lg shadow p-6">
        <!-- 内容区块 -->
      </section>
    </main>

    <!-- 页面底部 -->
    <footer class="bg-white border-t border-gray-200 mt-auto">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <!-- 页脚内容 -->
      </div>
    </footer>
  </div>
</template>
```

### 2.2 指令缩写

Vue 模板中的指令推荐使用缩写形式：

```vue
<template>
  <!-- v-bind 缩写 -->
  <div :class="containerClasses" :style="customStyle">
    内容
  </div>

  <!-- v-on 缩写 -->
  <button @click="handleClick" class="btn btn-primary">提交</button>

  <!-- v-model 缩写 -->
  <input v-model="inputValue" class="form-input" />

  <!-- 插槽缩写 -->
  <slot name="header" />
  <slot />
</template>
```

### 2.3 模板组织原则

- **顶层容器**：使用 Tailwind 的 `min-h-screen`、`flex flex-col` 等类名
- **区块划分**：使用语义化标签划分功能区块
- **避免深层嵌套**：模板层级不宜过深（建议不超过 5 层）
- **逻辑清晰**：v-if/v-for 位置合理，便于阅读
- **响应式适配**：使用 `sm:`、`md:`、`lg:`、`xl:` 前缀

## 3. Script 规范

### 3.1 组件注释规范

每个组件文件顶部应添加注释说明：

```vue
<script setup>
/**
 * 页面/组件名称
 * 功能描述：简明扼要说明主要功能
 * 依赖组件：列出依赖的子组件（如有）
 * Source: 参考的资料或文档来源（可选）
 */
</script>
```

### 3.2 导入顺序规范

按以下顺序组织导入语句，提升代码可读性：

```vue
<script setup>
/**
 * 导入顺序规范
 * 1. Vue 官方 API
 * 2. Vue Router 相关
 * 3. Pinia Store
 * 4. 工具函数 / 常量
 * 5. API 接口定义
 * 6. 子组件导入

 */

// 1. Vue 官方 API
import { ref, computed, onMounted, watch, nextTick } from 'vue'
import { useRoute, useRouter } from 'vue-router'

// 2. Pinia Store
import { useAuthStore } from '@/stores/auth'
import { useUserStore } from '@/stores/user'

// 3. 工具函数 / 常量
import { formatDate, debounce } from '@/utils'
import { PAGE_SIZE, DEFAULT_LANGUAGE } from '@/constants'

// 4. API 接口定义
import { getUserInfo, updateUserProfile } from '@/api/user'

// 5. 子组件导入
import BaseButton from '@/components/base/BaseButton.vue'
import UserCard from '@/components/business/UserCard.vue'


</script>
```

### 3.3 Props 定义规范

**对象语法（推荐）**：

```vue
<script setup>
const props = defineProps({
  // 必填属性
  title: {
    type: String,
    required: true
  },
  dataList: {
    type: Array,
    required: true
  },

  // 可选属性：提供默认值
  disabled: {
    type: Boolean,
    default: false
  },
  size: {
    type: String,
    default: 'md',
    validator: (value) => ['sm', 'md', 'lg'].includes(value)
  },
  loading: {
    type: Boolean,
    default: false
  },

  // 复杂对象类型
  config: {
    type: Object,
    default: () => ({ showIcon: true, maxHeight: 300 })
  }
})
</script>
```

### 3.4 Emits 定义规范

```vue
<script setup>
/**
 * 事件定义
 * 使用 kebab-case 命名
 */
const emit = defineEmits(['update:modelValue', 'change', 'delete', 'submit'])

// 带参数验证的事件
const emit = defineEmits({
  change: (value) => typeof value === 'string',
  submit: (data) => data !== null
})

/**
 * 触发事件
 */
const handleClick = () => {
  emit('change', newValue)
  emit('update:modelValue', props.modelValue)
}
</script>
```

### 3.5 组合式函数使用

将组件逻辑抽取为可复用的组合式函数：

```vue
<script setup>
/**
 * 使用组合式函数抽取通用逻辑
 * 遵循关注点分离原则
 */
import { onMounted, onUnmounted } from 'vue'
import { useScroll } from '@/composables/useScroll'
import { usePagination } from '@/composables/usePagination'

const { scrollY, isAtBottom } = useScroll()
const { list, loading, loadMore, refresh } = usePagination(fetchData)
</script>
```

### 3.6 Tailwind 动态类名

```vue
<script setup>
import { computed } from 'vue'

const props = defineProps({
  size: { type: String, default: 'md' },
  variant: { type: String, default: 'primary' },
  disabled: { type: Boolean, default: false }
})

// 尺寸映射
const sizeClasses = {
  sm: 'px-3 py-1.5 text-sm',
  md: 'px-4 py-2 text-base',
  lg: 'px-6 py-3 text-lg'
}

// 变体映射
const variantClasses = {
  primary: 'bg-blue-600 text-white hover:bg-blue-700',
  secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300',
  danger: 'bg-red-600 text-white hover:bg-red-700',
  success: 'bg-green-600 text-white hover:bg-green-700'
}

// 动态类名计算
const buttonClasses = computed(() => [
  'inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2',
  sizeClasses[props.size],
  variantClasses[props.variant],
  props.disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'
])
</script>

<template>
  <button :class="buttonClasses" :disabled="disabled">
    <svg v-if="loading" class="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" />
    </svg>
    <slot />
  </button>
</template>
```

## 4. Tailwind CSS 规范

### 4.1 tailwind.config.js 配置

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './index.html',
    './src/**/*.{vue,js,jsx}'
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a'
        }
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem'
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif']
      },
      boxShadow: {
        'custom': '0 2px 8px rgba(0, 0, 0, 0.1)',
        'custom-lg': '0 4px 16px rgba(0, 0, 0, 0.1)'
      }
    }
  },
  plugins: []
}
```

### 4.2 常用 Tailwind 类名速查

| 类别   | Tailwind 类名                                        | 说明                 |
| ------ | ---------------------------------------------------- | -------------------- |
| 布局   | `flex`, `grid`, `block`, `inline-block`      | 布局方式             |
| 定位   | `relative`, `absolute`, `fixed`, `sticky`    | 定位方式             |
| 间距   | `p-4`, `m-4`, `px-4`, `py-4`, `space-y-4`  | 内边距、外边距       |
| 尺寸   | `w-16`, `h-16`, `max-w-xl`, `min-h-screen`   | 宽度、高度           |
| 颜色   | `text-gray-900`, `bg-white`, `border-gray-200` | 文字、背景、边框颜色 |
| 字体   | `text-sm`, `font-medium`, `leading-6`          | 字号、字重、行高     |
| 边框   | `border`, `rounded-lg`, `rounded-full`         | 边框样式             |
| 阴影   | `shadow-sm`, `shadow-md`, `shadow-lg`          | 阴影效果             |
| 过渡   | `transition`, `duration-200`, `ease-in-out`    | 过渡动画             |
| 响应式 | `sm:`, `md:`, `lg:`, `xl:`                   | 响应式断点           |

### 4.3 常用布局模式

**水平居中布局**：

```vue
<div class="max-w-7xl mx-auto px-4">
  <!-- 内容 -->
</div>
```

**Flex 水平垂直居中**：

```vue
<div class="flex items-center justify-center min-h-screen">
  <div class="text-center">
    <h1 class="text-2xl font-bold">标题</h1>
  </div>
</div>
```

**Grid 响应式网格**：

```vue
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  <div class="bg-white rounded-lg shadow p-6">卡片 1</div>
  <div class="bg-white rounded-lg shadow p-6">卡片 2</div>
  <div class="bg-white rounded-lg shadow p-6">卡片 3</div>
</div>
```

**双列布局**：

```vue
<div class="flex flex-col lg:flex-row gap-6">
  <div class="lg:w-1/3">
    <!-- 侧边栏 -->
  </div>
  <div class="flex-1">
    <!-- 主内容 -->
  </div>
</div>
```

### 4.4 状态与交互类名

| 状态 | Tailwind 类名                                                     |
| ---- | ----------------------------------------------------------------- |
| 悬停 | `hover:bg-blue-600`, `hover:text-gray-900`                    |
| 聚焦 | `focus:outline-none`, `focus:ring-2`, `focus:ring-blue-500` |
| 激活 | `active:bg-blue-800`                                            |
| 禁用 | `disabled:opacity-50`, `disabled:cursor-not-allowed`          |
| 选中 | `selected:bg-blue-600`                                          |

### 4.5 提取公共样式

当同一类名组合频繁出现时，使用 `@apply` 提取：

```vue
<style scoped>
/**
 * 提取公共样式为工具类
 * 适用于重复使用的复杂样式组合
 */
.btn {
  @apply inline-flex items-center justify-center px-4 py-2 font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
}

.btn-secondary {
  @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500;
}

.card {
  @apply bg-white rounded-lg shadow p-6;
}

.input {
  @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}
</style>
```

### 4.6 自定义 CSS 与 Tailwind 混用

**优先级原则**：优先使用 Tailwind 原子类，自定义 CSS 仅作为后备方案。

#### 推荐顺序

1. **优先**：Tailwind 原子类（如 `transition-all`、`duration-300`、`rotate-90`）
2. **其次**：使用 `@apply` 提取重复的类名组合
3. **最后**：自定义 CSS 处理 Tailwind 无法实现的复杂效果

## 5. 页面组织规范

### 5.1 目录结构

```
src/views/                    # 页面组件目录
├── home/                     # 按模块划分
│   ├── index.vue             # 首页
│   └── components/           # 页面私有组件
├── user/                     # 用户模块
│   ├── Login.vue             # 登录页
│   ├── Register.vue          # 注册页
│   └── Profile.vue           # 个人中心
├── admin/                    # 管理模块
│   ├── Dashboard.vue         # 管理后台首页
│   └── components/           # 管理模块私有组件
└── error/                    # 错误页面
    ├── 404.vue               # 404 页面
    └── 500.vue               # 500 页面
```

### 5.2 页面文件命名

- 使用 **PascalCase**：`UserProfile.vue`、`ExamManage.vue`
- 避免使用 `index.vue` 作为页面入口（除模块根目录外）
- 页面名称应清晰表达功能

### 5.3 路由懒加载

```javascript
// router/index.js
const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/home/index.vue')
  },
  {
    path: '/user/profile',
    name: 'UserProfile',
    component: () => import('@/views/user/Profile.vue')
  },
  {
    path: '/admin/dashboard',
    name: 'Dashboard',
    component: () => import('@/views/admin/Dashboard.vue'),
    meta: { requiresAuth: true, role: 'admin' }
  }
]
```

## 6. API 调用规范

### 6.1 API 模块化组织

```
src/api/                      # API 接口定义
├── index.js                  # API 统一导出
├── user.js                   # 用户相关接口
├── exam.js                   # 考试相关接口
└── common.js                 # 公共接口
```

### 6.2 Axios 封装示例

```javascript
// utils/request.js
import axios from 'axios'

const request = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// 请求拦截器
request.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => Promise.reject(error)
)

// 响应拦截器
request.interceptors.response.use(
  (response) => {
    const { data, status } = response
    if (status === 200 && data.code === 0) {
      return data
    }
    return Promise.reject(new Error(data.message || '请求失败'))
  },
  (error) => {
    console.error('请求错误:', error)
    return Promise.reject(error)
  }
)

export default request
```

### 6.3 接口定义规范

```javascript
// api/user.js
import request from '@/utils/request'

/**
 * 获取用户信息
 * @returns {Promise} 用户信息
 */
export function getUserInfo() {
  return request.get('/api/user/profile')
}

/**
 * 更新用户资料
 * @param {Object} userData - 用户资料
 * @returns {Promise} 更新结果
 */
export function updateUserProfile(userData) {
  return request.put('/api/user/profile', userData)
}
```

### 6.4 页面中调用 API

```vue
<script setup>
import { ref, onMounted } from 'vue'
import { getUserInfo, updateUserProfile } from '@/api/user'

const userInfo = ref(null)
const loading = ref(false)
const error = ref(null)

onMounted(() => {
  loadUserData()
})

const loadUserData = async () => {
  loading.value = true
  error.value = null
  try {
    const res = await getUserInfo()
    userInfo.value = res.data
  } catch (e) {
    error.value = e.message
    console.error('加载用户信息失败:', e)
  } finally {
    loading.value = false
  }
}

const handleSave = async () => {
  loading.value = true
  error.value = null
  try {
    await updateUserProfile(userInfo.value)
    showToast('保存成功')
  } catch (e) {
    error.value = e.message
    showToast('保存失败', 'error')
  } finally {
    loading.value = false
  }
}

/**
 * 显示提示信息
 */
const showToast = (message, type = 'success') => {
  const bgColor = type === 'error' ? 'bg-red-500' : 'bg-green-500'
  const toast = document.createElement('div')
  toast.className = `fixed bottom-4 right-4 ${bgColor} text-white px-4 py-2 rounded-lg shadow-lg z-50`
  toast.textContent = message
  document.body.appendChild(toast)
  setTimeout(() => toast.remove(), 3000)
}
</script>
```

### 6.5 API 数据格式约定

为保持与后端数据库、SQLModel、FastAPI 的一致性，前端 API 调用需遵循以下约定：

| 场景 | 命名规范 | 示例 |
|------|---------|------|
| GET 请求参数 | snake_case | `{ question_type: 'exam' }` |
| POST 请求体 | snake_case | `{ subject_id: 1, order_num: 10 }` |
| PUT/PATCH 请求体 | snake_case | `{ category_name: '数据结构' }` |
| 响应数据处理 | 前端内部转换 | 接收 snake_case，转换为 camelCase 供内部使用 |

**为什么使用 snake_case？**

1. 与后端数据库字段一致（SQLite/MySQL 惯例）
2. 与 SQLModel 模型字段一致
3. 与 Pydantic Schema 字段一致
4. 与 Python 后端代码风格一致

**数据流示意图：**

```
前端变量 (camelCase)
        ↓ 构建请求
API 请求参数 (snake_case)  ← 必须转换
        ↓
后端接收 (snake_case)
        ↓
数据库存储 (snake_case)
        ↓
后端返回 (snake_case)
        ↓ 页面组件内部转换
前端内部使用 (camelCase)
```

**正确示例：**

```javascript
// ❌ 错误：使用驼峰
params: { questionType }

// ✅ 正确：使用蛇形
params: { question_type }

// ❌ 错误：混用
params: { subjectId }

// ✅ 正确：变量赋值给蛇形 key
params: { subject_id: subjectId }

// POST 请求体同理
const data = {
  subject_id: form.subjectId,  // 蛇形 key
  order_num: form.orderNum,     // 蛇形 key
  name: form.name
}
```

**注意事项：**

- Query 参数、Path 参数、Request Body 统一使用 snake_case
- 前端页面组件内部可以使用 camelCase 变量
- API 接口文件中必须转换为 snake_case
- 响应数据在页面组件内部按需转换为 camelCase 使用

## 7. 错误处理规范

### 7.1 错误类型分类

| 错误类型 | 处理方式            | 示例                   |
| -------- | ------------------- | ---------------------- |
| 参数错误 | 表单验证提示        | "用户名不能为空"       |
| 网络错误 | 重试提示            | "网络连接失败，请重试" |
| 权限错误 | 跳转登录/权限页     | "登录后查看"           |
| 业务错误 | 业务提示            | "该用户名已注册"       |
| 系统错误 | 通用提示 + 错误日志 | "系统异常，请稍后重试" |

### 7.2 错误处理模式

```vue
<script setup>
import { ref } from 'vue'
import { fetchData } from '@/api/service'

const loading = ref(false)
const data = ref(null)
const error = ref(null)

const loadData = async () => {
  loading.value = true
  error.value = null
  try {
    const res = await fetchData()
    data.value = res.data
  } catch (e) {
    handleError(e)
  } finally {
    loading.value = false
  }
}

/**
 * 统一错误处理
 */
const handleError = (error) => {
  let message = '操作失败，请稍后重试'
  let status = 'error'

  if (error.response) {
    const { status: httpStatus, data } = error.response
    switch (httpStatus) {
      case 401:
        message = '请先登录'
        status = 'warning'
        // 跳转登录
        break
      case 403:
        message = '没有操作权限'
        break
      case 404:
        message = '请求的资源不存在'
        break
      case 500:
        message = '服务器错误，请联系管理员'
        break
      default:
        message = data.message || '请求失败'
    }
  } else if (error.request) {
    message = '网络连接失败，请检查网络设置'
  }

  error.value = message
  showToast(message, status)
}

/**
 * 显示提示信息
 */
const showToast = (message, type = 'info') => {
  const bgColor = {
    success: 'bg-green-500',
    error: 'bg-red-500',
    warning: 'bg-yellow-500',
    info: 'bg-blue-500'
  }[type] || 'bg-gray-500'

  const toast = document.createElement('div')
  toast.className = `fixed bottom-4 right-4 ${bgColor} text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-opacity duration-300`
  toast.textContent = message
  document.body.appendChild(toast)

  // 动画淡入
  requestAnimationFrame(() => {
    toast.classList.add('opacity-100')
  })

  // 3秒后移除
  setTimeout(() => {
    toast.classList.remove('opacity-100')
    toast.classList.add('opacity-0')
    setTimeout(() => toast.remove(), 300)
  }, 3000)
}
</script>
```

### 7.3 错误状态展示组件

```vue
<template>
  <div v-if="error" class="p-4 bg-red-50 border border-red-200 rounded-lg">
    <div class="flex items-start">
      <svg class="w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
      </svg>
      <div>
        <h3 class="text-sm font-medium text-red-800">操作失败</h3>
        <p class="mt-1 text-sm text-red-700">{{ error }}</p>
        <button 
          v-if="showRetry"
          @click="$emit('retry')"
          class="mt-3 text-sm font-medium text-red-800 hover:text-red-700"
        >
          重新尝试
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
defineProps({
  error: { type: String, default: '' },
  showRetry: { type: Boolean, default: true }
})

defineEmits(['retry'])
</script>
```

### 7.4 加载状态展示组件

```vue
<template>
  <div v-if="loading" class="flex items-center justify-center py-12">
    <svg class="animate-spin h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" />
    </svg>
    <span class="ml-3 text-gray-600">{{ loadingText }}</span>
  </div>
  <slot v-else />
</template>

<script setup>
defineProps({
  loading: { type: Boolean, default: false },
  loadingText: { type: String, default: '加载中...' }
})
</script>
```

## 8. 状态管理规范

### 8.1 Pinia Store 结构

```
src/stores/                   # Pinia Store
├── index.js                  # Store 统一导出
├── auth.js                   # 认证相关状态
├── user.js                   # 用户信息
├── exam.js                   # 考试相关状态
└── common.js                 # 公共状态
```

### 8.2 Store 定义示例

```javascript
// stores/auth.js
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useAuthStore = defineStore('auth', () => {
  // 状态
  const token = ref(localStorage.getItem('token') || null)
  const userInfo = ref(null)

  // 计算属性
  const isLoggedIn = computed(() => !!token.value)
  const userRole = computed(() => userInfo.value?.role || 'guest')

  // 方法
  const setToken = (newToken) => {
    token.value = newToken
    localStorage.setItem('token', newToken)
  }

  const setUserInfo = (info) => {
    userInfo.value = info
  }

  const logout = () => {
    token.value = null
    userInfo.value = null
    localStorage.removeItem('token')
  }

  return {
    token,
    userInfo,
    isLoggedIn,
    userRole,
    setToken,
    setUserInfo,
    logout
  }
})
```

### 8.3 组件中使用 Store

```vue
<script setup>
import { onMounted } from 'vue'
import { useAuthStore } from '@/stores/auth'
import { useRouter } from 'vue-router'

const authStore = useAuthStore()
const router = useRouter()

onMounted(() => {
  if (authStore.isLoggedIn) {
    console.log('用户已登录:', authStore.userInfo)
  }
})

const handleLogout = () => {
  authStore.logout()
  router.push('/login')
}
</script>
```

## 9. 性能优化规范

### 9.1 组件懒加载

```vue
<script setup>
import { defineAsyncComponent } from 'vue'

// 路由组件懒加载
const ExamEditDialog = defineAsyncComponent(() =>
  import('@/components/business/ExamEditDialog.vue')
)
</script>
```

### 9.2 大列表优化

```vue
<template>
  <!-- 使用 v-memo 优化列表渲染 -->
  <div v-memo="[item.id, item.selected]">
    <ComplexComponent :item="item" />
  </div>
</template>
```

### 9.3 避免不必要的响应式

```javascript
// 推荐：不需要响应式的数据使用普通对象
const constants = {
  MAX_SIZE: 100,
  DEFAULT_TIMEOUT: 5000
}

// 避免：大数组整体响应式
const hugeArray = ref(new Array(10000).fill(0))

// 推荐：使用 shallowRef
const hugeArray = shallowRef(new Array(10000).fill(0))
```

### 9.4 图片优化

```vue
<template>
  <!-- 使用 srcset 实现响应式图片 -->
  <img 
    :srcset="`${imageUrl}?w=400 400w, ${imageUrl}?w=800 800w`"
    :sizes="(max-width: 640px) 400px, 800px"
    :src="`${imageUrl}?w=800`"
    alt="图片描述"
    loading="lazy"
    class="w-full h-auto rounded-lg"
  />
</template>
```

### 9.5 Tailwind CSS 优化

```javascript
// tailwind.config.js
module.exports = {
  content: [
    './index.html',
    './src/**/*.{vue,js,jsx}'
  ],
  safelist: [
    // 动态类名需要加入 safelist
    'bg-red-500',
    'bg-green-500',
    'text-2xl'
  ],
  // ...其他配置
}
```

## 10. 代码质量规范

### 10.1 注释规范

- 复杂逻辑必须添加注释说明
- API 调用说明参数和返回值
- 业务逻辑说明业务背景
- 禁用注释掉的代码

```vue
<script setup>
/**
 * 处理用户提交
 * 1. 表单验证
 * 2. 构建提交数据
 * 3. 调用接口
 * 4. 处理结果
 */
const handleSubmit = async () => {
  // 步骤说明
  if (!validateForm()) return

  // 构建数据
  const data = buildSubmitData()

  // 提交
  await submitData(data)
}
</script>
```

### 10.2 命名规范

| 类型     | 命名规则         | 示例                                       |
| -------- | ---------------- | ------------------------------------------ |
| 组件文件 | PascalCase       | `UserProfile.vue`                        |
| 变量     | camelCase        | `userName`, `dataList`                 |
| 常量     | UPPER_SNAKE_CASE | `MAX_PAGE_SIZE`                          |
| 函数     | camelCase        | `handleSubmit`, `fetchData`            |
| CSS 类名 | Tailwind 类名    | `flex`, `text-center`, `bg-blue-500` |
| Props    | camelCase        | `pageTitle`, `dataList`                |
| 事件     | kebab-case       | `update:modelValue`, `page-change`     |

### 10.3 Tailwind 类名排序规范

使用 Prettier 或手动排序 Tailwind 类名：

```vue
<!-- 推荐顺序：布局 → 定位 → 尺寸 → 间距 → 颜色 → 字体 → 边框 → 阴影 → 动画 -->
<div class="
  flex items-center justify-between
  relative
  w-full h-16
  px-4
  bg-white text-gray-900
  text-base font-medium
  border-b border-gray-200
  shadow-sm
">
</div>
```

### 10.4 ESLint 规则建议

```json
{
  "rules": {
    "vue/multi-word-component-names": "off",
    "vue/no-v-html": "off",
    "vue/html-self-closing": ["error", {
      "html": { "void": "always" }
    }],
    "vue/component-name-in-template-casing": ["error", "PascalCase"]
  }
}
```

### 10.5 Prettier 配置

```json
{
  "plugins": ["prettier-plugin-tailwindcss"],
  "tailwindFunctions": ["classNames", "cn"],
  "printWidth": 100,
  "tabWidth": 2,
  "singleQuote": true
}
```

## 11. 图标使用规范

### 11.1 图标库

项目统一使用 **FontAwesome 6** 图标库，通过 `@fortawesome/fontawesome-svg-core` 和 `@fortawesome/vue-fontawesome` 引入。

**注意**：必须先在 `main.js` 中导入需要的图标并添加到库中，才能在组件中使用。

### 11.2 页面中使用图标

```vue
<template>
  <!-- 导航图标 -->
  <nav class="flex items-center gap-4">
    <a href="/" class="flex items-center gap-2 text-gray-600 hover:text-primary-600">
      <font-awesome-icon :icon="['fas', 'house']" />
      <span>首页</span>
    </a>
  </nav>

  <!-- 操作按钮图标 -->
  <div class="flex items-center gap-2">
    <button class="p-2 text-gray-500 hover:text-gray-700">
      <font-awesome-icon :icon="['fas', 'search']" />
    </button>
    <button class="p-2 text-gray-500 hover:text-gray-700">
      <font-awesome-icon :icon="['fas', 'bell']" />
    </button>
  </div>

  <!-- 状态图标 -->
  <span class="flex items-center gap-1 text-green-600">
    <font-awesome-icon :icon="['fas', 'check-circle']" />
    <span>已完成</span>
  </span>
</template>
```

### 11.3 图标与 Tailwind 配合

```vue
<template>
  <!-- 图标颜色 -->
  <font-awesome-icon :icon="['fas', 'star']" class="text-yellow-500" />

  <!-- 图标尺寸（使用 Tailwind） -->
  <font-awesome-icon :icon="['fas', 'user']" class="text-lg" />
  <font-awesome-icon :icon="['fas', 'user']" class="text-2xl" />

  <!-- 图标动画 -->
  <font-awesome-icon :icon="['fas', 'spinner']" class="fa-spin text-primary-600" />

  <!-- 图标悬停效果 -->
  <font-awesome-icon
    :icon="['fas', 'heart']"
    class="text-gray-400 hover:text-red-500 transition-colors cursor-pointer"
  />
</template>
```

### 11.4 可访问性

```vue
<template>
  <!-- 纯装饰性图标：添加 aria-hidden -->
  <button class="flex items-center gap-2">
    <font-awesome-icon :icon="['fas', 'download']" aria-hidden="true" />
    <span>下载</span>
  </button>

  <!-- 仅图标按钮：添加 aria-label 或 title -->
  <button aria-label="搜索" title="搜索">
    <font-awesome-icon :icon="['fas', 'search']" aria-hidden="true" />
  </button>
</template>
```

### 11.5 图标导入规范

在 `main.js` 中按需导入图标：

```javascript
// main.js
import { library } from '@fortawesome/fontawesome-svg-core'
import { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'

// 导入需要的图标
import {
  faHouse,
  faSearch,
  faBell,
  faStar,
  faCheck,
  faCheckCircle,
  faDownload,
  faHeart,
  faUser,
  faSpinner,
  faTimes,
  faPlus,
  faTrash,
  faEdit,
  faGraduationCap
} from '@fortawesome/free-solid-svg-icons'

// 添加到库
library.add(
  faHouse,
  faSearch,
  faBell,
  faStar,
  faCheck,
  faCheckCircle,
  faDownload,
  faHeart,
  faUser,
  faSpinner,
  faTimes,
  faPlus,
  faTrash,
  faEdit,
  faGraduationCap
)

// 全局注册组件
app.component('font-awesome-icon', FontAwesomeIcon)
```

**图标前缀说明**：

- `fas` - Solid 实心图标
- `far` - Regular 线性图标
- `fab` - Brands 品牌图标

```vue
<!-- 实心图标 -->
<font-awesome-icon :icon="['fas', 'user']" />

<!-- 线性图标 -->
<font-awesome-icon :icon="['far', 'user']" />

<!-- 品牌图标 -->
<font-awesome-icon :icon="['fab', 'github']" />
```
